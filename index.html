<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="TaskDay - Gerencie suas tarefas de forma eficiente">
  <title>TaskDay</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Estilos customizados -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--primary-color);display:flex;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.5s;">
    <h1 style="color:var(--secondary-color);font-size:3rem;animation:splashFade 2s ease-in-out;">TaskDay</h1>
  </div>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><i class="fa-solid fa-calendar-check"></i> TaskDay</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto" id="navbar-links">
          <li class="nav-item">
            <a class="nav-link" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Tarefas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Calendário</a>
          </li>
          <li class="nav-item" id="nav-login">
            <a class="nav-link" href="#">Login</a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto" id="navbar-user" style="display:none;">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <span id="navbar-welcome"></span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="#">Atividades</a></li>
              <li><a class="dropdown-item" href="#">Perfil</a></li>
              <li><a class="dropdown-item" href="#">Conquistas</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#" id="navbar-logout">Sair</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Tela de Login -->
  <main class="container d-flex flex-column justify-content-center align-items-center" style="min-height:80vh;">
    <!-- Login e Cadastro -->
    <div id="login-card" class="card shadow p-4 w-100" style="max-width:350px;">
      <h2 class="mb-4 text-center" style="color:var(--primary-color);">Entrar</h2>
      <form id="login-form">
        <div class="mb-3">
          <label for="login-email" class="form-label">Email</label>
          <input type="email" class="form-control" id="login-email" placeholder="Digite seu email" required>
        </div>
        <div class="mb-3">
          <label for="login-senha" class="form-label">Senha</label>
          <input type="password" class="form-control" id="login-senha" placeholder="Digite sua senha" required>
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-2">Entrar</button>
        <a href="#" id="show-cadastro" class="d-block text-center mb-2" style="color:var(--secondary-color);">Cadastrar</a>
        <button type="button" class="btn btn-outline-dark w-100"><i class="fa-brands fa-google"></i> Entrar com Google</button>
      </form>
    </div>
    <div id="cadastro-card" class="card shadow p-4 w-100" style="max-width:350px; display:none;">
      <h2 class="mb-4 text-center" style="color:var(--primary-color);">Cadastro</h2>
      <form id="cadastro-form">
        <div class="mb-3">
          <label for="cadastro-nome" class="form-label">Nome completo</label>
          <input type="text" class="form-control" id="cadastro-nome" placeholder="Digite seu nome" required>
        </div>
        <div class="mb-3">
          <label for="cadastro-email" class="form-label">Email</label>
          <input type="email" class="form-control" id="cadastro-email" placeholder="Digite seu email" required>
        </div>
        <div class="mb-3">
          <label for="cadastro-senha" class="form-label">Senha</label>
          <input type="password" class="form-control" id="cadastro-senha" placeholder="Digite sua senha" required>
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-2">Criar conta</button>
        <a href="#" id="voltar-login" class="d-block text-center mb-2" style="color:var(--secondary-color);">Voltar ao login</a>
      </form>
    </div>
  </main>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- JS customizados -->
  <script src="js/main.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/calendar.js"></script>
  <script>
    // Splash screen animation
    window.addEventListener('DOMContentLoaded', function() {
      setTimeout(function() {
        var splash = document.getElementById('splash');
        splash.style.opacity = '0';
        setTimeout(function(){ splash.style.display = 'none'; }, 500);
      }, 2000);
    });
    // Alternar entre login e cadastro e autenticação
    document.addEventListener('DOMContentLoaded', function() {
      var showCadastro = document.getElementById('show-cadastro');
      var voltarLogin = document.getElementById('voltar-login');
      var loginCard = document.getElementById('login-card');
      var cadastroCard = document.getElementById('cadastro-card');
      var loginForm = document.getElementById('login-form');
      var cadastroForm = document.getElementById('cadastro-form');
      var navbarLinks = document.getElementById('navbar-links');
      var navbarUser = document.getElementById('navbar-user');
      var navbarWelcome = document.getElementById('navbar-welcome');
      var navLogin = document.getElementById('nav-login');
      var navbarLogout = document.getElementById('navbar-logout');

      // Alternância de telas
      if(showCadastro && voltarLogin && loginCard && cadastroCard) {
        showCadastro.onclick = function(e) {
          e.preventDefault();
          loginCard.style.display = 'none';
          cadastroCard.style.display = 'block';
        };
        voltarLogin.onclick = function(e) {
          e.preventDefault();
          cadastroCard.style.display = 'none';
          loginCard.style.display = 'block';
        };
      }
      // Cadastro funcional
      if(cadastroForm) {
        cadastroForm.onsubmit = function(e) {
          e.preventDefault();
          var nome = document.getElementById('cadastro-nome').value;
          var email = document.getElementById('cadastro-email').value;
          var senha = document.getElementById('cadastro-senha').value;
          var usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');
          usuarios.push({ nome, email, senha });
          localStorage.setItem('usuarios', JSON.stringify(usuarios));
          alert('Cadastro realizado com sucesso!');
          cadastroCard.style.display = 'none';
          loginCard.style.display = 'block';
        };
      }
      // Autenticação de login
      function autenticar(email, senha) {
        var usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');
        var usuario = usuarios.find(u => u.email === email && u.senha === senha);
        return usuario || null;
      }
      function mostrarUsuario(usuario) {
        if(navbarLinks) navbarLinks.style.display = 'none';
        if(navbarUser) navbarUser.style.display = 'flex';
        if(navbarWelcome) navbarWelcome.textContent = `Bem-vindo(a), ${usuario.nome}`;
        if(loginCard) loginCard.style.display = 'none';
        if(cadastroCard) cadastroCard.style.display = 'none';
      }
      function esconderUsuario() {
        if(navbarLinks) navbarLinks.style.display = '';
        if(navbarUser) navbarUser.style.display = 'none';
        if(navbarWelcome) navbarWelcome.textContent = '';
        if(loginCard) loginCard.style.display = 'block';
      }
      // Persistência de login
      var usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado') || 'null');
      if(usuarioLogado) {
        mostrarUsuario(usuarioLogado);
      }
      // Login
      if(loginForm) {
        loginForm.onsubmit = function(e) {
          e.preventDefault();
          var email = document.getElementById('login-email').value;
          var senha = document.getElementById('login-senha').value;
          var usuario = autenticar(email, senha);
          if(usuario) {
            localStorage.setItem('usuarioLogado', JSON.stringify(usuario));
            mostrarUsuario(usuario);
          } else {
            alert('Email ou senha inválidos!');
          }
        };
      }
      // Logout
      if(navbarLogout) {
        navbarLogout.onclick = function(e) {
          e.preventDefault();
          localStorage.removeItem('usuarioLogado');
          esconderUsuario();
        };
      }
    });
  </script>
  <style>
    @keyframes splashFade {
      0% { opacity: 0; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.05); }
      100% { opacity: 1; transform: scale(1); }
    }
    @media (max-width: 576px) {
      .card { padding: 1.5rem 0.5rem; }
      .card h2 { font-size: 1.5rem; }
      .form-label, .form-control, .btn { font-size: 1rem; }
    }
  </style>
</body>
</html>
